{"version":3,"sources":["src/index.js"],"names":["page","pageNum","Math","ceil","window","innerHeight","chunk","arr","size","Array","from","length","v","i","slice","originNews","k","content","news","element","document","querySelector","loadObserver","IntersectionObserver","entries","intersectionRatio","hasPrePage","hasNextPage","now","pre","next","render","target","className","threshold","observe","last","data","innerHTML","forEach","location","href"],"mappings":"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","file":"src.a2b27638.js","sourceRoot":"..","sourcesContent":["// 10000 条数据？  Array.from  内存\r\n  // 4yu  10000 originNews 200个数组 [[50],[50]]\r\n  let page = 0;  // 页码\r\n  let pageNum = Math.ceil(window.innerHeight / 50);\r\n  const chunk = (arr, size) => Array.from({\r\n    length: Math.ceil(arr.length / size)\r\n  }, (v, i) => \r\n    arr.slice(i * size, i * size + size)\r\n  )\r\n    \r\n  const originNews = Array.from({\r\n    length: 1000\r\n  }, (v, k) => ({\r\n    content: `新闻${k}`\r\n  }))\r\n  let news = chunk(originNews, pageNum) // 当前页需要的数据\r\n  // console.log(news)\r\n\r\n  const element = document.querySelector('.news'); // 代孕的\r\n  const loadObserver = new IntersectionObserver((entries) => {\r\n    // if ()\r\n    // console.log(entries);\r\n    if (entries[0].intersectionRatio <= 0) {\r\n      return;\r\n    }\r\n    const hasPrePage = page != 0; // page 当前页面, \r\n    const hasNextPage = page != news.length - 1 // 最后一页？ \r\n    const now = news[page]\r\n    const pre = hasPrePage ? news[page - 1]:[];\r\n    const next = hasNextPage ? news[page + 1]: [];\r\n\r\n    render(pre.length, [...pre, ...now, ...next]);\r\n    page = entries[0].target.className == 'news-footer' || page == 0\r\n      ? (hasNextPage? page + 1: page)\r\n      : (hasPrePage? page - 1: page)\r\n    \r\n  }, {\r\n    threshold:[1]\r\n  }) // 监听\r\n\r\n  loadObserver.observe(document.querySelector('.news-header'));\r\n  loadObserver.observe(document.querySelector('.news-footer'));\r\n // 建议函数内的代码不要超过10行 封装\r\n  function render(last, data) {\r\n    element.innerHTML = '';\r\n    data.forEach((i, v) => element.innerHTML += v == last \r\n      ? `<div id=\"news-href\">${i.content}</div>`\r\n      :`<div>${i.content}</div>`\r\n    )\r\n    window.location.href = '#news-href';\r\n  }\r\n"]}